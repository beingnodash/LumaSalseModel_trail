# Luma高校销售与收益分析模型 - 用户指南

欢迎使用Luma高校销售与收益分析模型！本指南将帮助您了解如何有效使用本工具，即使您没有深厚的财务背景，也能轻松上手并从中获益。

## 目录

1.  [模型简介](#1-模型简介)
2.  [快速上手](#2-快速上手)
    *   [启动应用](#启动应用)
    *   [界面概览](#界面概览)
3.  [核心功能详解](#3-核心功能详解)
    *   [主页：参数设置与核心预测](#主页参数设置与核心预测)
    *   [可视化：洞察数据趋势](#可视化洞察数据趋势)
    *   [敏感性分析：理解关键因素](#敏感性分析理解关键因素)
    *   [策略优化：寻找最佳方案](#策略优化寻找最佳方案)
4.  [如何理解和调整参数](#4-如何理解和调整参数)
    *   [参数分组说明](#参数分组说明)
    *   [调整参数的建议](#调整参数的建议)
5.  [如何解读结果](#5-如何解读结果)
    *   [关键指标解读](#关键指标解读)
    *   [图表解读技巧](#图表解读技巧)
    *   [策略优化结果的意义](#策略优化结果的意义)
6.  [常见问题与技巧](#6-常见问题与技巧)

---

## 1. 模型简介

Luma高校销售与收益分析模型是一个强大的决策支持工具，旨在帮助您预测在不同市场策略、定价方案和运营参数下，Luma产品在高校市场的潜在销售额和收益。它通过模拟未来几年的业务发展，量化各种因素对最终财务表现的影响。

**您可以利用这个模型来：**

*   **预测未来收益**：了解在当前设想的策略下，未来几年的收入情况。
*   **测试不同策略**：比较改变价格、调整分成比例、拓展新客户等不同做法可能带来的效果差异。
*   **发现增长机会**：通过调整参数，找到可能提升收入的关键点。
*   **优化业务决策**：利用策略优化功能，系统地寻找能让收益最大化的参数组合。

本模型特别设计为用户友好型，即使您不是专业的财务分析师，也能通过直观的界面操作和清晰的结果解读来使用它。

## 2. 快速上手

### 启动应用

1.  **确保环境配置正确**：如果您是首次运行，请确保已按照 `streamlit_app/README.md` 中的说明安装了所有必要的软件和库（通常使用 `poetry install`）。
2.  **运行命令**：打开命令行工具（如Terminal或PowerShell），进入项目的主目录 (`LumaSalseModel01`)，然后执行以下命令：
    ```bash
    poetry run streamlit run streamlit_app/app.py
    ```
3.  **访问应用**：命令执行后，应用会自动在您的默认浏览器中打开一个新标签页，地址通常是 `http://localhost:8501`。

### 界面概览

应用主要包含以下几个页面，您可以通过页面顶部的导航栏进行切换：

*   **主页 (🏠 Luma销售与收益模型)**：这是您的起点。在这里，您可以设置所有核心的业务参数，运行模型，并查看基本的预测结果摘要。
*   **可视化 (📊 详细数据可视化)**：提供多种图表，帮助您深入分析预测的收入构成、趋势变化等。
*   **敏感性分析 (🔬 参数敏感性分析)**：允许您选择一个或多个参数，观察它们的变化如何影响关键的输出指标（如总收入）。
*   **策略优化 (🎯 策略优化与收入最大化)**：这是一个高级功能，可以帮助您自动寻找能使某个目标（例如Luma总收入）最大化的最佳参数组合。

通常，您的操作流程是：

1.  从**主页**开始，设置或调整参数。
2.  点击“运行模型”。
3.  在**主页**查看概要结果，然后根据需要切换到**可视化**、**敏感性分析**或**策略优化**页面进行更深入的探索。

## 3. 核心功能详解

### 主页：参数设置与核心预测

主页是模型的核心控制面板。

*   **左侧边栏**：这里列出了所有可以调整的模型参数，它们被分成了几个逻辑组（如“签约目标”、“定价与分成”等）。您可以逐项修改这些参数的默认值。
*   **“运行模型”按钮**：当您设置好参数后，点击此按钮，模型会根据您的输入进行计算。
*   **右侧结果区**：模型运行完毕后，这里会显示关键的预测结果摘要，例如未来几年的总收入、不同收入来源的构成等。通常会有一个汇总表格和几个概览图表。

**操作步骤：**

1.  仔细检查左侧边栏的各项参数，根据您的设想或需要分析的场景进行调整。
2.  确保所有百分比参数（如模式分布）的总和符合逻辑（例如，不同模式的签约比例加起来应该是100%）。
3.  点击“运行模型”。
4.  查看右侧的结果。如果结果与预期差异较大，可以返回调整参数并重新运行。

### 可视化：洞察数据趋势

当您在主页运行模型后，就可以进入“可视化”页面查看更详细、更丰富的图表。

*   **图表选择**：页面通常会提供多种图表类型，例如：
    *   总收入趋势图：展示未来几年总收入的增长情况。
    *   收入结构饼图/条形图：显示不同收入来源（如固定费用、学生付费分成）的占比。
    *   客户增长图：预测签约高校数量和付费学生数量的变化。
*   **交互性**：许多图表是交互式的，您可以将鼠标悬停在图表元素上查看具体数值，或者点击图例来显示/隐藏某些数据系列。

**如何使用：**

*   在主页运行模型后，切换到此页面。
*   浏览不同的图表，从不同维度理解模型的预测结果。
*   关注趋势、占比和关键转折点，这些可以帮助您发现潜在的业务洞察。

### 敏感性分析：理解关键因素

敏感性分析帮助您了解哪些参数对最终结果的影响最大。

*   **参数选择**：您可以选择一个或多个您关心的输入参数（例如，“单次功能价格”或“高校客户年度续约率”）。
*   **指标选择**：选择您想观察的输出指标（例如，“Luma总收入”）。
*   **分析范围**：为选定的参数设置一个变动范围（例如，在当前值的-20%到+20%之间变动）。
*   **结果展示**：模型会计算在参数变动范围内，输出指标如何相应变化，并通常以图表（如蜘蛛图、瀑布图或简单的线图）的形式展示出来。

**如何使用：**

1.  在主页运行模型以建立一个基准。
2.  切换到“敏感性分析”页面。
3.  选择您想分析的参数和输出指标。
4.  设置参数的变动范围和分析的点数/步长。
5.  点击“运行敏感性分析”。
6.  观察结果图表：
    *   如果一条线很陡峭，说明该参数对结果影响很大。
    *   如果一条线很平缓，说明该参数影响较小。

这可以帮助您识别哪些因素是业务增长的关键驱动力，或者哪些方面风险较高。

### 策略优化：寻找最佳方案

策略优化是一个强大的功能，它能自动搜索参数组合，以找到能让您选定的目标（如“Luma总收入”）达到最优的方案。

*   **参数选择与范围设定**：首先，您需要选择一个或多个您希望模型去“优化”的参数（例如，您可以让模型尝试不同的“年费会员价格”和“模式2a Luma学生付费分成”组合）。然后，为这些选定的参数设定一个合理的搜索范围（最小值和最大值）。
*   **优化目标选择**：您需要明确告诉模型，您想最大化哪个指标。通常，这会是“Luma总收入”，但也可以是其他具体收入项。
*   **优化算法选择**：模型提供了几种不同的优化算法，例如：
    *   **网格搜索 (Grid Search)**：它会系统地尝试您设定的参数范围内的所有可能组合。结果精确，但如果参数多、范围大，会非常耗时。
    *   **贝叶斯优化 (Bayesian Optimization)**：一种更智能的搜索方法，它会根据已有的尝试结果来决定下一步尝试哪些参数组合，效率较高，适合复杂问题。
    *   **遗传算法 (Genetic Algorithm)**：模拟生物进化过程，适合在非常大的参数空间中寻找好的解决方案。
*   **运行优化**：设置好以上选项后，点击“开始优化”。模型会根据您选择的算法进行大量计算。
*   **结果展示**：优化完成后，页面会显示：
    *   **最佳目标值**：例如，找到的最高的“Luma总收入”是多少。
    *   **最佳参数组合**：一个表格，列出了为了达到上述最佳目标值，各个被优化参数应该分别取什么值。
    *   **解释说明**：一段文字，帮助您理解这个“最佳参数组合”表格的含义，以及这些参数是如何共同作用以实现优化目标的。

**如何使用：**

1.  确保您已在主页运行过一次模型，以便策略优化有一个基准参数配置。
2.  切换到“策略优化”页面。
3.  **第1步**：勾选您希望模型进行优化的参数。
4.  **第2步**：为每个选中的参数设置一个实际可行的最小值和最大值。例如，价格不能为负，比例不能超过100%。
5.  选择您希望最大化的“优化目标”。
6.  选择一种“优化算法”并根据需要调整其特定设置（如迭代次数）。注意页面上关于计算量的提示，尤其是网格搜索。
7.  点击“🚀 开始优化”。过程可能需要一些时间，请耐心等待，页面会有进度条显示。
8.  优化完成后，仔细查看“最佳参数组合”表格和下方的解释说明。这组参数就是模型认为能让您的目标最大化的“秘诀”。

**重要提示**：策略优化给出的“最佳”结果是基于模型和您所提供数据的预测。在实际应用这些参数前，仍需结合实际业务经验和市场情况进行判断。

## 4. 如何理解和调整参数

模型中的参数众多，理解它们是有效使用的关键。参数通常在主页的左侧边栏进行设置。

### 参数分组说明

参数大致可以分为以下几类（具体名称可能略有不同，请参照应用内的中文标签）：

*   **预测周期配置**：
    *   `总分析周期数（半年）`：模型预测的总时长，以半年为一个单位。例如，设置为10，表示预测未来5年。
*   **签约目标与模式分布**：
    *   `每半年新签约高校数`：平均每半年能新签多少家高校客户。
    *   `模式分布（Type1, Type2a, 2b, 2c, Type3）`：新签约的高校中，选择不同合作模式的比例。这些比例加起来应该是100%。不同模式对应不同的收费方式和分成结构。
*   **高校与学生规模**：
    *   `平均每高校学生数`：签约高校的平均在校生人数。
*   **学生付费行为**：
    *   `学生总付费转化率`：高校学生中，最终会为Luma产品付费的比例。
    *   `付费用户中单次功能比例` / `付费用户中会员比例`：付费学生中，是选择按次付费，还是购买会员。两者相加应为100%。
    *   `每付费学生半年单次功能使用次数`：按次付费的学生，平均每半年会使用多少次付费功能。
    *   `年费/3年/5年会员购买比例`：购买会员的学生中，选择不同时长会员的比例。这些比例加起来应该是100%。
*   **定价与分成**：
    *   `单次功能价格`：学生每次使用付费功能需要支付的金额。
    *   `年费/3年/5年会员价格`：不同类型会员的售价。
    *   `模式X高校使用费`：对于某些合作模式，高校需要支付给Luma的固定费用（可能是年费或一次性费用）。
    *   `模式X Luma学生付费分成`：对于某些合作模式，Luma从学生支付给高校的费用中获得的分成比例。
*   **客户留存/续约**：
    *   `高校客户年度续约率`：已签约高校在合作到期后，选择继续合作的比例。
    *   `学生付费用户年度续约率`：已购买会员的学生，在会员到期后选择续费的比例。

### 调整参数的建议

*   **从实际出发**：尽可能使用接近您业务实际情况或合理预估的数值。
*   **小幅调整**：如果您不确定某个参数的影响，可以先在当前值的基础上做小幅调整（例如+/- 10%），然后运行模型看结果变化。
*   **关注关联性**：某些参数是相互关联的。例如，提高价格可能会降低付费转化率。模型本身可能没有内置这种复杂的关联，您在分析时需要考虑到这一点。
*   **场景测试**：可以设定几种不同的场景来测试。例如：
    *   乐观场景：较高的客户增长率、付费转化率。
    *   悲观场景：较低的增长和转化。
    *   特定策略场景：例如，大幅提高会员价格，同时增加市场推广投入（体现在新客户增长上）。
*   **利用敏感性分析**：如果不确定哪些参数最重要，可以先用敏感性分析功能来识别它们。
*   **参考历史数据**：如果Luma已有类似业务或试点项目，其历史数据是设定参数的最佳参考。

## 5. 如何解读结果

模型运行后会产生大量数据，关键在于抓住重点，理解它们对业务的启示。

### 关键指标解读

在主页、可视化和策略优化页面，您会看到一些核心的财务和运营指标：

*   **Luma总收入 (Luma_Revenue_Total)**：这是最重要的指标之一，代表Luma在预测期内从高校业务获得的总收入。
*   **收入构成**：
    *   `Luma固定费用收入 (Luma_Fixed_Fee_Total)`：来自高校支付的固定合作费用。
    *   `Luma学生付费分成收入 (Luma_Student_Share_Total)`：来自学生付费后，Luma获得的分成。
    *   这些构成可以帮助您了解收入的主要来源和风险点。
*   **客户数量**：
    *   `累计签约高校数 (Cumulative_Universities_Total)`
    *   `活跃付费学生数 (Active_Paying_Students_Total)`
    *   这些运营指标反映了市场拓展和用户增长的情况。
*   **ARPU (Average Revenue Per User/University)**：平均每个用户或每所高校贡献的收入。虽然模型可能不直接显示ARPU，但您可以用总收入除以对应的用户/高校数来估算，这有助于衡量价值创造能力。

### 图表解读技巧

*   **看趋势，非绝对值**：单个时间点的数据可能意义有限，更重要的是观察各项指标随时间变化的趋势（增长、下降、平稳、周期性波动）。
*   **比较与关联**：
    *   比较不同收入来源的增长速度。
    *   将收入增长与客户数量增长进行对比，看增长是由客户量驱动还是单客户价值驱动。
*   **注意转折点**：图表中出现的峰值、谷底或趋势改变点，往往意味着某些关键因素发生了变化或达到了临界状态，值得深入分析其原因。
*   **利用交互功能**：鼠标悬停、点击图例等交互操作可以帮助您聚焦到具体数据点或数据系列。

### 策略优化结果的意义

当您使用“策略优化”功能后，会得到一个“最佳参数组合”表格和相应的解释。如何理解这个结果？

*   **这是一个“条件最优”解**：这个“最佳”是相对于您所选择的优化目标、您设定的参数范围以及模型本身的逻辑而言的。改变这些前提条件，最佳解也可能改变。
*   **参数间的协同效应**：表格中的参数值不是孤立的，它们共同作用才达到了最优结果。单独改变其中一个参数，可能无法维持整体的最优性。
*   **方向性指导**：即使您不能完全照搬这些参数值到实际业务中（因为实际情况更复杂），它也提供了非常有价值的方向性指导。例如，如果优化结果显示应该大幅提高某个价格，同时略微降低某个分成比例，这可能启发您思考定价策略和渠道合作模式的调整方向。
*   **量化潜在收益**：优化结果中的“最佳目标值”（例如，最大化的Luma总收入）为您量化了在理想参数组合下，业务可能达到的高度。
*   **结合实际判断**：再次强调，模型结果是决策的辅助，而非替代。您需要结合市场竞争、执行能力、政策风险等模型外的因素来综合评估策略优化给出的建议。

## 6. 常见问题与技巧

*   **模型运行缓慢/卡顿？**
    *   **敏感性分析**：如果选择分析的参数点数过多，或者同时分析多个参数，计算量会很大。可以适当减少点数或分批分析。
    *   **策略优化**：网格搜索在参数维度高（例如超过3-4个参数被选中优化）或每个参数的搜索点数多时，会非常耗时。考虑减少优化参数的数量，缩小搜索范围，或尝试使用贝叶斯优化或遗传算法，它们通常在复杂问题上效率更高。
    *   检查您的电脑性能，关闭不必要的程序。
*   **参数设置不合理导致结果异常？**
    *   仔细检查所有百分比参数（如各种分布比例）的总和是否为100%。
    *   确保价格、数量等参数为正数。
    *   如果结果远超预期或远低于预期，回顾参数设置，看是否有笔误或不切实际的假设。
*   **如何保存我的参数设置和结果？**
    *   **参数**：目前应用可能不直接支持保存参数配置方案。您可以手动记录下重要的参数组合，或者对浏览器页面进行截图。
    *   **结果**：
        *   主页的汇总结果表格和策略优化的“所有评估结果”通常有“下载CSV”按钮。
        *   图表可以右键点击保存为图片。
*   **“会话状态已重置”或需要重新运行模型？**
    *   Streamlit应用在某些情况下（如代码更新后重新加载、长时间无操作）可能会重置会话。这意味着您在主页设置的参数和运行的结果可能会丢失，需要重新操作一遍。
    *   通常，从主页导航到其他页面（可视化、敏感性分析、策略优化）之前，都需要确保已在主页成功运行了模型，因为后续页面的分析依赖于主页的计算结果。

---

希望这份指南能帮助您更好地使用Luma高校销售与收益分析模型。如果您在使用过程中遇到任何问题或有进一步的建议，欢迎反馈！
